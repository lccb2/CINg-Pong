import pygame
import random

pygame.init()
screen = pygame.display.set_mode((800, 600))
clock = pygame.time.Clock()
running = True
dt = 0

imagem1 = pygame.image.load('imagem1.png')
imagem2 = pygame.image.load('imagem2.png')
imagem3 = pygame.image.load('imagem3.png')
imagem4 = pygame.image.load('imagem4.png')
imagem1 = pygame.transform.scale(imagem1, (40, 40))
imagem2 = pygame.transform.scale(imagem2, (60, 60))
imagem3 = pygame.transform.scale(imagem3, (45, 45))
imagem4 = pygame.transform.scale(imagem4, (40, 40))

imagens_coletaveis = [imagem1, imagem2, imagem3, imagem4]

coletados = [0, 0, 0, 0]  

class Coletaveis:
    def __init__(self, x, y, image, index):
        self.position = pygame.Vector2(x, y)
        self.image = image
        self.index = index
        self.rect = self.image.get_rect(center=(x, y))
    
    def draw(self, screen):
        screen.blit(self.image, self.rect.topleft)

def aparicao_aleatoria_coletavel_na_coluna(imagens, coluna_x):
    y = random.randint(0, screen.get_height() - imagens[0].get_height())
    index_imagem = random.randint(0, len(imagens) - 1)
    imagem_aleatoria = imagens[index_imagem]
    return Coletaveis(coluna_x, y, imagem_aleatoria, index_imagem)

coletaveis = []

tempo_para_proximo_coletavel = 0
intervalo_entre_coletaveis = 2  
coluna_x = 100  

class Player:
    def __init__(self, x, y):
        self.position = pygame.Vector2(x, y)
        self.image = pygame.Surface((50, 50))
        self.image.fill((0, 255, 0))  
        self.rect = self.image.get_rect(center=(x, y))
    
    def draw(self, screen):
        screen.blit(self.image, self.rect.topleft)
    
    def move(self, dx, dy):
        self.position.x += dx
        self.position.y += dy
        self.rect.center = self.position

player = Player(screen.get_width() // 2, screen.get_height() - 50)

while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    tempo_para_proximo_coletavel -= dt
    if tempo_para_proximo_coletavel <= 0:
        coletaveis.append(aparicao_aleatoria_coletavel_na_coluna(imagens_coletaveis, coluna_x))
        tempo_para_proximo_coletavel = intervalo_entre_coletaveis

    keys = pygame.key.get_pressed()
    if keys[pygame.K_LEFT]:
        player.move(-300 * dt, 0)
    if keys[pygame.K_RIGHT]:
        player.move(300 * dt, 0)
    if keys[pygame.K_UP]:
        player.move(0, -300 * dt)
    if keys[pygame.K_DOWN]:
        player.move(0, 300 * dt)

    for collectible in coletaveis[:]:
        if player.rect.colliderect(collectible.rect):
            coletados[collectible.index] += 1  
            coletaveis.remove(collectible)
            # adiciona função que vai ser alterada

    screen.fill((0, 0, 0))  
    
    for collectible in coletaveis:
        collectible.draw(screen)

    player.draw(screen)

    pygame.display.flip()

    dt = clock.tick(60) / 1000

pygame.quit()
